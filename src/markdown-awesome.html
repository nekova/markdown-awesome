<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../bower_components/highlightjs/highlight.pack.js"></script>
<script src="../bower_components/marked/lib/marked.js"></script>

<polymer-element name="markdown-awesome">
    <template>
        <link rel="stylesheet" href="markdown-awesome.css">
        <link rel="stylesheet" href="../bower_components/highlightjs/styles/github.css">
        <div id="markdown-textarea">
            <textarea id="markdown-input" value="{{text}}"></textarea>
        </div>
        <div id="preview"></div>
    </template>

    <script>

        Polymer('markdown-awesome', {
            theme: "github",
            textChanged: function() {
                this.$.preview.innerHTML = marked(this.text);
            },
            ready: function() {
                marked.setOptions({
                    highlightClass: 'hljs',
                    gfm: true,
                    tables: true,
                    langPrefix: '',
                    highlight: function(code) {
                        return hljs.highlightAuto(code).value;
                    }
                });
            }
        });
    </script>

</polymer-element>
